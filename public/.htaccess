# GitHub Pages / Apache .htaccess for SPA routing
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Sitemap redirects to Supabase Edge Functions
    RewriteRule ^sitemap_index\.xml$ https://yknmcddrfkggphrktivd.supabase.co/functions/v1/sitemap-index [P,L]
    RewriteRule ^sitemap_tournaments\.xml$ https://yknmcddrfkggphrktivd.supabase.co/functions/v1/sitemap-tournaments [P,L]
    RewriteRule ^blog/sitemap\.xml$ https://yknmcddrfkggphrktivd.supabase.co/functions/v1/blog-sitemap [P,L]
    RewriteRule ^blog/feed\.xml$ https://yknmcddrfkggphrktivd.supabase.co/functions/v1/blog-feed [P,L]
    
    # Handle Angular and React Router
    # Don't rewrite files or directories
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Rewrite everything else to index.html to allow HTML5 state links
    RewriteRule ^ index.html [L]
</IfModule>

# Set cache headers
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
</IfModule>